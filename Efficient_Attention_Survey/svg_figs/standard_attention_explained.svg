<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 560">
  <defs>
    <linearGradient id="qGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b"/>
      <stop offset="100%" style="stop-color:#ee5a5a"/>
    </linearGradient>
    <linearGradient id="kGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffd93d"/>
      <stop offset="100%" style="stop-color:#f4c430"/>
    </linearGradient>
    <linearGradient id="vGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4ade80"/>
      <stop offset="100%" style="stop-color:#22c55e"/>
    </linearGradient>
    <linearGradient id="sGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a78bfa"/>
      <stop offset="100%" style="stop-color:#8b5cf6"/>
    </linearGradient>
    <linearGradient id="pGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#38bdf8"/>
      <stop offset="100%" style="stop-color:#0ea5e9"/>
    </linearGradient>
    <linearGradient id="oGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f472b6"/>
      <stop offset="100%" style="stop-color:#ec4899"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="560" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="24" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Standard Self-Attention: Step by Step
  </text>
  <text x="450" y="62" font-family="monospace" font-size="12" fill="#64748b" text-anchor="middle" dominant-baseline="middle">
    Understanding the O(N²) bottleneck
  </text>
  
  <!-- Main formula -->
  <rect x="200" y="80" width="500" height="40" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1"/>
  <text x="450" y="105" font-family="serif" font-size="18" fill="#f8fafc" text-anchor="middle" dominant-baseline="middle">
    O = softmax(QKᵀ/√d) · V
  </text>
  
  <!-- Step 1: Input Projection -->
  <rect x="30" y="140" width="260" height="160" rx="12" fill="#1e293b" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <circle cx="55" cy="165" r="15" fill="#3b82f6"/>
  <text x="55" y="165" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">1</text>
  <text x="160" y="165" font-family="Arial" font-size="13" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Input Projection</text>
  
  <rect x="50" y="190" width="45" height="55" rx="4" fill="#475569"/>
  <text x="72" y="222" font-family="Arial" font-size="14" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">X</text>
  <text x="72" y="260" font-family="monospace" font-size="9" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">N×D</text>
  
  <text x="115" y="210" font-family="Arial" font-size="14" fill="#64748b" dominant-baseline="middle">→</text>
  
  <rect x="140" y="190" width="35" height="25" rx="3" fill="url(#qGrad)"/>
  <text x="157" y="205" font-family="Arial" font-size="11" fill="#fff" text-anchor="middle" dominant-baseline="middle">Q</text>
  <rect x="140" y="220" width="35" height="25" rx="3" fill="url(#kGrad)"/>
  <text x="157" y="235" font-family="Arial" font-size="11" fill="#1e293b" text-anchor="middle" dominant-baseline="middle">K</text>
  <rect x="140" y="250" width="35" height="25" rx="3" fill="url(#vGrad)"/>
  <text x="157" y="265" font-family="Arial" font-size="11" fill="#fff" text-anchor="middle" dominant-baseline="middle">V</text>
  
  <text x="195" y="205" font-family="monospace" font-size="8" fill="#94a3b8" dominant-baseline="middle">N×d</text>
  <text x="195" y="235" font-family="monospace" font-size="8" fill="#94a3b8" dominant-baseline="middle">N×d</text>
  <text x="195" y="265" font-family="monospace" font-size="8" fill="#94a3b8" dominant-baseline="middle">N×d</text>
  
  <!-- Step 2: Attention Scores -->
  <rect x="310" y="140" width="280" height="160" rx="12" fill="#1e293b" stroke="#a78bfa" stroke-width="1" filter="url(#shadow)"/>
  <circle cx="335" cy="165" r="15" fill="#3b82f6"/>
  <text x="335" y="165" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">2</text>
  <text x="450" y="165" font-family="Arial" font-size="13" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Attention Scores</text>
  
  <rect x="325" y="195" width="35" height="45" rx="3" fill="url(#qGrad)"/>
  <text x="342" y="220" font-family="Arial" font-size="11" fill="#fff" text-anchor="middle" dominant-baseline="middle">Q</text>
  <text x="370" y="220" font-family="Arial" font-size="14" fill="#94a3b8" dominant-baseline="middle">×</text>
  <rect x="385" y="195" width="45" height="35" rx="3" fill="url(#kGrad)"/>
  <text x="407" y="215" font-family="Arial" font-size="10" fill="#1e293b" text-anchor="middle" dominant-baseline="middle">Kᵀ</text>
  <text x="445" y="220" font-family="Arial" font-size="14" fill="#94a3b8" dominant-baseline="middle">=</text>
  
  <rect x="465" y="190" width="60" height="60" rx="4" fill="url(#sGrad)" filter="url(#shadow)"/>
  <text x="495" y="225" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">S</text>
  
  <rect x="530" y="190" width="45" height="22" rx="4" fill="#ef4444"/>
  <text x="552" y="204" font-family="monospace" font-size="9" fill="#fff" text-anchor="middle" dominant-baseline="middle">N×N!</text>
  
  <text x="450" y="275" font-family="monospace" font-size="10" fill="#ef4444" text-anchor="middle" dominant-baseline="middle">⚠️ O(N²) memory!</text>
  
  <!-- Step 3: Softmax -->
  <rect x="610" y="140" width="260" height="160" rx="12" fill="#1e293b" stroke="#38bdf8" stroke-width="1" filter="url(#shadow)"/>
  <circle cx="635" cy="165" r="15" fill="#3b82f6"/>
  <text x="635" y="165" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">3</text>
  <text x="740" y="165" font-family="Arial" font-size="13" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Softmax (Row-wise)</text>
  
  <rect x="630" y="195" width="50" height="50" rx="4" fill="url(#sGrad)"/>
  <text x="655" y="225" font-family="Arial" font-size="12" fill="#fff" text-anchor="middle" dominant-baseline="middle">S</text>
  <text x="695" y="220" font-family="Arial" font-size="12" fill="#94a3b8" dominant-baseline="middle">→</text>
  <rect x="720" y="195" width="50" height="50" rx="4" fill="url(#pGrad)"/>
  <text x="745" y="225" font-family="Arial" font-size="12" fill="#fff" text-anchor="middle" dominant-baseline="middle">P</text>
  
  <rect x="785" y="195" width="70" height="50" rx="4" fill="#0f172a"/>
  <text x="820" y="215" font-family="monospace" font-size="8" fill="#38bdf8" text-anchor="middle" dominant-baseline="middle">Each row</text>
  <text x="820" y="232" font-family="monospace" font-size="8" fill="#38bdf8" text-anchor="middle" dominant-baseline="middle">sums to 1</text>
  
  <text x="740" y="275" font-family="monospace" font-size="10" fill="#ef4444" text-anchor="middle" dominant-baseline="middle">⚠️ O(N²) memory!</text>
  
  <!-- Step 4: Output -->
  <rect x="30" y="320" width="350" height="160" rx="12" fill="#1e293b" stroke="#f472b6" stroke-width="1" filter="url(#shadow)"/>
  <circle cx="55" cy="345" r="15" fill="#3b82f6"/>
  <text x="55" y="345" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">4</text>
  <text x="205" y="345" font-family="Arial" font-size="13" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Compute Weighted Sum</text>
  
  <rect x="50" y="375" width="55" height="55" rx="4" fill="url(#pGrad)"/>
  <text x="77" y="407" font-family="Arial" font-size="12" fill="#fff" text-anchor="middle" dominant-baseline="middle">P</text>
  <text x="77" y="445" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">N×N</text>
  <text x="120" y="407" font-family="Arial" font-size="14" fill="#94a3b8" dominant-baseline="middle">×</text>
  <rect x="140" y="375" width="35" height="55" rx="4" fill="url(#vGrad)"/>
  <text x="157" y="407" font-family="Arial" font-size="12" fill="#fff" text-anchor="middle" dominant-baseline="middle">V</text>
  <text x="157" y="445" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">N×d</text>
  <text x="195" y="407" font-family="Arial" font-size="14" fill="#94a3b8" dominant-baseline="middle">=</text>
  <rect x="220" y="375" width="35" height="55" rx="4" fill="url(#oGrad)" filter="url(#shadow)"/>
  <text x="237" y="407" font-family="Arial" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">O</text>
  <text x="237" y="445" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">N×d</text>
  
  <text x="305" y="390" font-family="monospace" font-size="9" fill="#e2e8f0" dominant-baseline="middle">Each output is</text>
  <text x="305" y="408" font-family="monospace" font-size="9" fill="#e2e8f0" dominant-baseline="middle">a weighted sum</text>
  <text x="305" y="426" font-family="monospace" font-size="9" fill="#e2e8f0" dominant-baseline="middle">of all V vectors</text>
  
  <!-- Complexity Summary -->
  <rect x="400" y="320" width="470" height="160" rx="12" fill="#1e293b" stroke="#ef4444" stroke-width="2" filter="url(#shadow)"/>
  <text x="635" y="350" font-family="Arial" font-size="14" fill="#ef4444" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    ⚠️ The Quadratic Bottleneck
  </text>
  
  <text x="420" y="385" font-family="monospace" font-size="11" fill="#e2e8f0" dominant-baseline="middle">Time Complexity:</text>
  <text x="560" y="385" font-family="monospace" font-size="11" fill="#ef4444" font-weight="bold" dominant-baseline="middle">O(N² · d)</text>
  <text x="680" y="385" font-family="monospace" font-size="10" fill="#64748b" dominant-baseline="middle">→ QKᵀ and PV</text>
  
  <text x="420" y="410" font-family="monospace" font-size="11" fill="#e2e8f0" dominant-baseline="middle">Memory (S, P):</text>
  <text x="560" y="410" font-family="monospace" font-size="11" fill="#ef4444" font-weight="bold" dominant-baseline="middle">O(N²)</text>
  <text x="680" y="410" font-family="monospace" font-size="10" fill="#64748b" dominant-baseline="middle">→ Store full matrix</text>
  
  <text x="420" y="435" font-family="monospace" font-size="11" fill="#e2e8f0" dominant-baseline="middle">Memory (Q,K,V,O):</text>
  <text x="560" y="435" font-family="monospace" font-size="11" fill="#4ade80" dominant-baseline="middle">O(N · d)</text>
  <text x="680" y="435" font-family="monospace" font-size="10" fill="#64748b" dominant-baseline="middle">→ Linear</text>
  
  <rect x="420" y="450" width="430" height="25" rx="6" fill="#0f172a"/>
  <text x="635" y="465" font-family="monospace" font-size="9" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">
    N=128K → S matrix = 128K × 128K ≈ 64GB! This is why we need efficient attention!
  </text>
</svg>
