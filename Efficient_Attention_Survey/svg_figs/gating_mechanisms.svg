<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <linearGradient id="forgetGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b"/>
      <stop offset="100%" style="stop-color:#c0392b"/>
    </linearGradient>
    <linearGradient id="selectGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4ade80"/>
      <stop offset="100%" style="stop-color:#22c55e"/>
    </linearGradient>
    <linearGradient id="stateGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#38bdf8"/>
      <stop offset="100%" style="stop-color:#0ea5e9"/>
    </linearGradient>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffd93d"/>
      <stop offset="100%" style="stop-color:#f4c430"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="600" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="26" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Gating Mechanisms in Linear Attention
  </text>
  <text x="450" y="65" font-family="monospace" font-size="13" fill="#64748b" text-anchor="middle" dominant-baseline="middle">
    Controlling information flow with Forget Gates and Select Gates
  </text>
  
  <!-- Formula Box -->
  <rect x="40" y="90" width="820" height="145" rx="16" fill="#1e293b" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="120" font-family="Arial" font-size="15" fill="#3b82f6" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Linear Attention with Gates: State Update Rule
  </text>
  
  <!-- Main Formula: Ht = (Ht-1 ⊙ Gf) + (kt^T · vt ⊙ Gs) -->
  <g transform="translate(70, 165)">
    <text x="0" y="0" font-family="serif" font-size="22" fill="#f8fafc" font-style="italic" dominant-baseline="middle">H</text>
    <text x="20" y="8" font-family="serif" font-size="14" fill="#64748b" dominant-baseline="middle">t</text>
    <text x="45" y="0" font-family="serif" font-size="22" fill="#64748b" dominant-baseline="middle">=</text>
    <text x="75" y="0" font-family="serif" font-size="36" fill="#64748b" dominant-baseline="middle">(</text>
    
    <!-- Ht-1 -->
    <rect x="95" y="-18" width="50" height="36" rx="6" fill="url(#stateGrad)"/>
    <text x="120" y="0" font-family="serif" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Hₜ₋₁</text>
    
    <text x="160" y="0" font-family="serif" font-size="20" fill="#f8fafc" dominant-baseline="middle">⊙</text>
    
    <!-- Gf -->
    <rect x="185" y="-18" width="45" height="36" rx="6" fill="url(#forgetGrad)"/>
    <text x="207" y="0" font-family="serif" font-size="16" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Gf</text>
    
    <text x="245" y="0" font-family="serif" font-size="36" fill="#64748b" dominant-baseline="middle">)</text>
    <text x="280" y="0" font-family="serif" font-size="24" fill="#f8fafc" dominant-baseline="middle">+</text>
    <text x="315" y="0" font-family="serif" font-size="36" fill="#64748b" dominant-baseline="middle">(</text>
    
    <!-- kt^T -->
    <rect x="335" y="-18" width="40" height="36" rx="6" fill="url(#inputGrad)"/>
    <text x="355" y="0" font-family="serif" font-size="14" fill="#1e293b" text-anchor="middle" font-weight="bold" dominant-baseline="middle">kₜᵀ</text>
    
    <text x="390" y="0" font-family="serif" font-size="20" fill="#f8fafc" dominant-baseline="middle">·</text>
    
    <!-- vt -->
    <rect x="410" y="-18" width="35" height="36" rx="6" fill="url(#inputGrad)"/>
    <text x="427" y="0" font-family="serif" font-size="14" fill="#1e293b" text-anchor="middle" font-weight="bold" dominant-baseline="middle">vₜ</text>
    
    <text x="460" y="0" font-family="serif" font-size="20" fill="#f8fafc" dominant-baseline="middle">⊙</text>
    
    <!-- Gs -->
    <rect x="485" y="-18" width="45" height="36" rx="6" fill="url(#selectGrad)"/>
    <text x="507" y="0" font-family="serif" font-size="16" fill="#1e293b" text-anchor="middle" font-weight="bold" dominant-baseline="middle">Gs</text>
    
    <text x="545" y="0" font-family="serif" font-size="36" fill="#64748b" dominant-baseline="middle">)</text>
  </g>
  
  <!-- Output formula -->
  <g transform="translate(280, 210)">
    <text x="0" y="0" font-family="serif" font-size="18" fill="#f8fafc" font-style="italic" dominant-baseline="middle">o</text>
    <text x="12" y="6" font-family="serif" font-size="12" fill="#64748b" dominant-baseline="middle">t</text>
    <text x="35" y="0" font-family="serif" font-size="18" fill="#64748b" dominant-baseline="middle">=</text>
    <text x="65" y="0" font-family="serif" font-size="18" fill="#f472b6" font-style="italic" dominant-baseline="middle">q</text>
    <text x="80" y="6" font-family="serif" font-size="12" fill="#64748b" dominant-baseline="middle">t</text>
    <text x="100" y="0" font-family="serif" font-size="18" fill="#64748b" dominant-baseline="middle">·</text>
    <text x="125" y="0" font-family="serif" font-size="18" fill="#f8fafc" font-style="italic" dominant-baseline="middle">H</text>
    <text x="145" y="6" font-family="serif" font-size="12" fill="#64748b" dominant-baseline="middle">t</text>
  </g>
  
  <!-- Gate Boxes -->
  <!-- Forget Gate -->
  <rect x="40" y="260" width="400" height="280" rx="16" fill="#1e293b" stroke="url(#forgetGrad)" stroke-width="2" filter="url(#shadow)"/>
  <rect x="40" y="260" width="400" height="45" rx="16" fill="url(#forgetGrad)"/>
  <rect x="40" y="290" width="400" height="15" fill="url(#forgetGrad)"/>
  <text x="240" y="288" font-family="Arial" font-size="16" fill="#fff" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Forget Gate (Gf)
  </text>
  
  <text x="65" y="335" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Purpose:</text>
  <text x="65" y="360" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">Controls how much past information to retain</text>
  
  <text x="65" y="395" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Mechanism:</text>
  <text x="65" y="420" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">• Values near 1: Keep previous state</text>
  <text x="65" y="445" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">• Values near 0: Forget/decay memory</text>
  
  <text x="65" y="480" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Methods:</text>
  <text x="65" y="505" font-family="monospace" font-size="11" fill="#ff6b6b" dominant-baseline="middle">HGRN, GLA, Mamba, RetNet, RWKV</text>
  
  <!-- Select Gate -->
  <rect x="460" y="260" width="400" height="280" rx="16" fill="#1e293b" stroke="url(#selectGrad)" stroke-width="2" filter="url(#shadow)"/>
  <rect x="460" y="260" width="400" height="45" rx="16" fill="url(#selectGrad)"/>
  <rect x="460" y="290" width="400" height="15" fill="url(#selectGrad)"/>
  <text x="660" y="288" font-family="Arial" font-size="16" fill="#1e293b" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Select Gate (Gs)
  </text>
  
  <text x="485" y="335" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Purpose:</text>
  <text x="485" y="360" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">Controls how much new information to add</text>
  
  <text x="485" y="395" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Mechanism:</text>
  <text x="485" y="420" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">• Values near 1: Absorb new token fully</text>
  <text x="485" y="445" font-family="monospace" font-size="11" fill="#94a3b8" dominant-baseline="middle">• Values near 0: Ignore/filter token</text>
  
  <text x="485" y="480" font-family="Arial" font-size="13" fill="#e2e8f0" font-weight="bold" dominant-baseline="middle">Methods:</text>
  <text x="485" y="505" font-family="monospace" font-size="11" fill="#4ade80" dominant-baseline="middle">Mamba2, xLSTM, DeltaNet</text>
  
  <!-- Footer -->
  <text x="450" y="565" font-family="monospace" font-size="12" fill="#64748b" text-anchor="middle" dominant-baseline="middle">
    Dimensions: H (d×d) | Gf (d×d) | Gs (d×d) | Complexity: O(Nd²) time, O(d²) memory
  </text>
</svg>
