<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520">
  <defs>
    <linearGradient id="lgGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#43e97b"/>
      <stop offset="100%" style="stop-color:#38f9d7"/>
    </linearGradient>
    <filter id="sh5">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="520" fill="#0f172a"/>
  
  <!-- Main container -->
  <rect x="30" y="20" width="840" height="480" rx="16" fill="#1e293b" filter="url(#sh5)"/>
  
  <!-- Header -->
  <rect x="30" y="20" width="840" height="55" rx="16" fill="url(#lgGrad)"/>
  <rect x="30" y="55" width="840" height="20" fill="url(#lgGrad)"/>
  <text x="450" y="55" font-family="Arial, sans-serif" font-size="20" fill="#0f172a" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Formula 5: Gated Linear Attention (State Update)
  </text>
  
  <!-- Info banner -->
  <rect x="50" y="95" width="800" height="35" rx="8" fill="#1e3a5f"/>
  <text x="450" y="115" font-family="Arial" font-size="13" fill="#43e97b" text-anchor="middle" dominant-baseline="middle">
    Linear attention with forget gate (Gf) and select gate (Gs) for controlled memory
  </text>
  
  <!-- Main formula -->
  <rect x="50" y="145" width="800" height="130" rx="10" fill="#0f172a" stroke="#43e97b" stroke-width="2"/>
  <text x="450" y="170" font-family="Arial" font-size="14" fill="#43e97b" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    State Update Equation
  </text>
  
  <!-- H_t = G_f^(t) ⊙ H_{t-1} + G_s^(t) ⊙ k_t^T v_t -->
  <text x="100" y="220" font-family="serif" font-size="32" fill="#f8fafc" font-style="italic" dominant-baseline="middle">H</text>
  <text x="130" y="230" font-family="serif" font-size="18" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  <text x="165" y="220" font-family="serif" font-size="32" fill="#64748b" dominant-baseline="middle">=</text>
  
  <!-- Forget gate term -->
  <text x="215" y="220" font-family="serif" font-size="26" fill="#ef4444" font-style="italic" dominant-baseline="middle">G</text>
  <text x="245" y="205" font-family="serif" font-size="14" fill="#ef4444" font-style="italic" dominant-baseline="middle">(t)</text>
  <text x="245" y="235" font-family="serif" font-size="14" fill="#ef4444" font-style="italic" dominant-baseline="middle">f</text>
  <text x="285" y="220" font-family="serif" font-size="26" fill="#64748b" dominant-baseline="middle">⊙</text>
  <text x="325" y="220" font-family="serif" font-size="26" fill="#f8fafc" font-style="italic" dominant-baseline="middle">H</text>
  <text x="360" y="230" font-family="serif" font-size="16" fill="#64748b" font-style="italic" dominant-baseline="middle">t-1</text>
  
  <text x="420" y="220" font-family="serif" font-size="32" fill="#64748b" dominant-baseline="middle">+</text>
  
  <!-- Select gate term -->
  <text x="470" y="220" font-family="serif" font-size="26" fill="#4ade80" font-style="italic" dominant-baseline="middle">G</text>
  <text x="500" y="205" font-family="serif" font-size="14" fill="#4ade80" font-style="italic" dominant-baseline="middle">(t)</text>
  <text x="500" y="235" font-family="serif" font-size="14" fill="#4ade80" font-style="italic" dominant-baseline="middle">s</text>
  <text x="540" y="220" font-family="serif" font-size="26" fill="#64748b" dominant-baseline="middle">⊙</text>
  <text x="580" y="220" font-family="serif" font-size="26" fill="#fbbf24" font-style="italic" dominant-baseline="middle">k</text>
  <text x="605" y="205" font-family="serif" font-size="14" fill="#fbbf24" font-style="italic" dominant-baseline="middle">T</text>
  <text x="605" y="235" font-family="serif" font-size="14" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  <text x="635" y="220" font-family="serif" font-size="26" fill="#4ade80" font-style="italic" dominant-baseline="middle">v</text>
  <text x="660" y="230" font-family="serif" font-size="16" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  
  <!-- Output equation o_t = q_t H_t -->
  <text x="250" y="265" font-family="serif" font-size="26" fill="#f8fafc" font-style="italic" dominant-baseline="middle">o</text>
  <text x="275" y="275" font-family="serif" font-size="16" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  <text x="310" y="265" font-family="serif" font-size="26" fill="#64748b" dominant-baseline="middle">=</text>
  <text x="350" y="265" font-family="serif" font-size="26" fill="#f472b6" font-style="italic" dominant-baseline="middle">q</text>
  <text x="375" y="275" font-family="serif" font-size="16" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  <text x="410" y="265" font-family="serif" font-size="26" fill="#f8fafc" font-style="italic" dominant-baseline="middle">H</text>
  <text x="445" y="275" font-family="serif" font-size="16" fill="#64748b" font-style="italic" dominant-baseline="middle">t</text>
  
  <!-- Gate explanations -->
  <rect x="50" y="290" width="390" height="80" rx="10" fill="#1e3a5f" stroke="#ef4444" stroke-width="1"/>
  <text x="245" y="315" font-family="Arial" font-size="13" fill="#ef4444" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Forget Gate (Gf)
  </text>
  <text x="245" y="340" font-family="Arial" font-size="12" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">
    Controls how much past info to retain
  </text>
  <text x="245" y="360" font-family="Arial" font-size="11" fill="#64748b" text-anchor="middle" dominant-baseline="middle">
    0 = forget all | 1 = keep all
  </text>
  
  <rect x="460" y="290" width="390" height="80" rx="10" fill="#1e3a5f" stroke="#4ade80" stroke-width="1"/>
  <text x="655" y="315" font-family="Arial" font-size="13" fill="#4ade80" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Select Gate (Gs)
  </text>
  <text x="655" y="340" font-family="Arial" font-size="12" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">
    Controls how much new info to add
  </text>
  <text x="655" y="360" font-family="Arial" font-size="11" fill="#64748b" text-anchor="middle" dominant-baseline="middle">
    0 = ignore | 1 = fully absorb
  </text>
  
  <!-- Methods classification -->
  <rect x="50" y="385" width="800" height="100" rx="10" fill="#0f172a" stroke="#334155" stroke-width="1"/>
  <text x="450" y="408" font-family="Arial" font-size="13" fill="#f8fafc" text-anchor="middle" font-weight="bold" dominant-baseline="middle">
    Methods by Gates
  </text>
  
  <text x="80" y="438" font-family="Arial" font-size="11" fill="#64748b" dominant-baseline="middle">No Gates:</text>
  <text x="150" y="438" font-family="Arial" font-size="11" fill="#94a3b8" dominant-baseline="middle">Linear Trans., Performer, CHELA</text>
  
  <text x="80" y="458" font-family="Arial" font-size="11" fill="#ef4444" dominant-baseline="middle">Forget Only:</text>
  <text x="170" y="458" font-family="Arial" font-size="11" fill="#94a3b8" dominant-baseline="middle">RetNet, GLA, Mamba, RWKV</text>
  
  <text x="450" y="448" font-family="Arial" font-size="11" fill="#4ade80" dominant-baseline="middle">Forget + Select:</text>
  <text x="555" y="448" font-family="Arial" font-size="11" fill="#94a3b8" dominant-baseline="middle">Mamba2, xLSTM, DeltaNet</text>
  
  <text x="450" y="473" font-family="Arial" font-size="12" fill="#22d3ee" dominant-baseline="middle">Complexity: O(Nd²) time, O(d²) memory</text>
</svg>

